<ion-header>
  <ion-toolbar>
    <ion-title>Pokédex</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- BUSCA POR NOME -->
  <ion-searchbar
    debounce="300"
    placeholder="Buscar Pokémon"
    [(ngModel)]="search"
    (ionInput)="applyFilters()">
  </ion-searchbar>

  <!-- FILTRO POR TIPO -->
  <ion-segment scrollable [(ngModel)]="typeFilter" (ionChange)="applyFilters()">
    <ion-segment-button value="">
      <ion-label>Todos</ion-label>
    </ion-segment-button>

    <ion-segment-button *ngFor="let t of ALL_TYPES" [value]="t">
      <ion-label>{{ t | titlecase }}</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- GRADE DE CARTÕES -->
  <div class="cards">
    <pokemon-card
      *ngFor="let p of pokemons"
      [id]="p.id"
      [name]="p.name"
      [sprite]="p.sprite"
      [type]="p.type"
      [fav]="isFav(p.id)"
      [onToggleFav]="toggleFav"
      [onSelect]="openDetails">
    </pokemon-card>
  </div>

  <!-- INFINITE SCROLL -->
  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMore($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles"></ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>